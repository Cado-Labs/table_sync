# Logfile created on 2019-06-10 10:49:52 +0300 by logger.rb/66358
I, [2019-06-10T10:49:52.746417 #13430]  INFO -- : (0.105497s) DROP TABLE IF EXISTS "items";
CREATE TABLE "items" (
  "id" bigserial primary key,
  "name" varchar(255) NOT NULL,
  "price" double precision NOT NULL
);

DROP TABLE IF EXISTS "players";
CREATE TABLE "players" (
  "external_id" int primary key,
  "project_id" text,
  "email" varchar(255) NOT NULL,
  "online_status" boolean,
  "version" decimal,
  "rest" jsonb
);

DROP TABLE IF EXISTS "players_part_1";
CREATE TABLE "players_part_1" (like "players" INCLUDING ALL);

DROP TABLE IF EXISTS "clients";
CREATE TABLE "clients" (
  "client_id" int,
  "project_id" int,
  "name" varchar(255) NOT NULL,
  "ext_id" int NOT NULL,
  "ext_project_id" int NOT NULL,
  "ts_version" decimal,
  "ts_rest" jsonb,
  PRIMARY KEY (client_id, project_id),
  UNIQUE (ext_id, ext_project_id)
);

DROP TABLE IF EXISTS "users";
CREATE TABLE "users" (
  "id" int primary key,
  "name" varchar(255) NOT NULL,
  "email" varchar(255) NOT NULL,
  "ext_id" int NOT NULL,
  "ext_project_id" int NOT NULL,
  "version" decimal,
  "rest" jsonb,
  "first_sync_time" timestamp without time zone,
  UNIQUE (ext_id, ext_project_id)
);


I, [2019-06-10T11:27:19.446294 #28534]  INFO -- : (0.023398s) DROP TABLE IF EXISTS "items";
CREATE TABLE "items" (
  "id" bigserial primary key,
  "name" varchar(255) NOT NULL,
  "price" double precision NOT NULL
);

DROP TABLE IF EXISTS "players";
CREATE TABLE "players" (
  "external_id" int primary key,
  "project_id" text,
  "email" varchar(255) NOT NULL,
  "online_status" boolean,
  "version" decimal,
  "rest" jsonb
);

DROP TABLE IF EXISTS "players_part_1";
CREATE TABLE "players_part_1" (like "players" INCLUDING ALL);

DROP TABLE IF EXISTS "clients";
CREATE TABLE "clients" (
  "client_id" int,
  "project_id" int,
  "name" varchar(255) NOT NULL,
  "ext_id" int NOT NULL,
  "ext_project_id" int NOT NULL,
  "ts_version" decimal,
  "ts_rest" jsonb,
  PRIMARY KEY (client_id, project_id),
  UNIQUE (ext_id, ext_project_id)
);

DROP TABLE IF EXISTS "users";
CREATE TABLE "users" (
  "id" int primary key,
  "name" varchar(255) NOT NULL,
  "email" varchar(255) NOT NULL,
  "ext_id" int NOT NULL,
  "ext_project_id" int NOT NULL,
  "version" decimal,
  "rest" jsonb,
  "first_sync_time" timestamp without time zone,
  UNIQUE (ext_id, ext_project_id)
);


I, [2019-06-10T11:27:19.668475 #28534]  INFO -- : (0.010221s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"items"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2019-06-10T11:27:19.685461 #28534]  INFO -- : (0.001011s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"players"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2019-06-10T11:27:19.709005 #28534]  INFO -- : (0.007227s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"clients"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2019-06-10T11:27:19.715438 #28534]  INFO -- : (0.001281s) SELECT pg_attribute.attname AS pk FROM pg_class, pg_attribute, pg_index, pg_namespace WHERE pg_class.oid = pg_attribute.attrelid AND pg_class.relnamespace = pg_namespace.oid AND pg_class.oid = pg_index.indrelid AND pg_index.indkey[0] = pg_attribute.attnum AND pg_index.indisprimary = 't' AND pg_class.oid = CAST(CAST('"items"' AS regclass) AS oid)
I, [2019-06-10T11:27:19.719061 #28534]  INFO -- : (0.003330s) INSERT INTO "items" ("id", "name", "price") VALUES (1, 'test', 123) RETURNING "id"
I, [2019-06-10T11:27:19.719564 #28534]  INFO -- : (0.000102s) BEGIN
I, [2019-06-10T11:27:19.720060 #28534]  INFO -- : (0.000261s) DELETE FROM "items" WHERE ("id" = 1) RETURNING *
I, [2019-06-10T11:27:19.720478 #28534]  INFO -- : (0.000285s) COMMIT
I, [2019-06-10T11:27:19.726200 #28534]  INFO -- : (0.005462s) SELECT count(*) AS "count" FROM "items" LIMIT 1
I, [2019-06-10T11:27:19.727407 #28534]  INFO -- : (0.000390s) INSERT INTO "items" ("id", "name", "price") VALUES (1, 'test', 123) RETURNING "id"
I, [2019-06-10T11:27:19.728459 #28534]  INFO -- : (0.000319s) BEGIN
I, [2019-06-10T11:27:19.729176 #28534]  INFO -- : (0.000273s) DELETE FROM "items" WHERE ("id" = 1) RETURNING *
I, [2019-06-10T11:27:19.731910 #28534]  INFO -- : (0.000168s) ROLLBACK
I, [2019-06-10T11:27:19.732487 #28534]  INFO -- : (0.000228s) SELECT count(*) AS "count" FROM "items" LIMIT 1
I, [2019-06-10T11:27:19.736099 #28534]  INFO -- : (0.000106s) BEGIN
E, [2019-06-10T11:27:19.742322 #28534] ERROR -- : PG::NotNullViolation: ERROR:  null value in column "client_id" violates not-null constraint
DETAIL:  Failing row contains (null, null, test, 1, 1, 1.0, {"a": 1}).: INSERT INTO "clients" ("name", "ext_id", "ext_project_id", "ts_version", "ts_rest") VALUES ('test', 1, 1, 1.0, '{"a":1}'::jsonb) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "ts_version" = "excluded"."ts_version", "ts_rest" = "excluded"."ts_rest" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2019-06-10T11:27:19.742759 #28534]  INFO -- : (0.000099s) ROLLBACK
I, [2019-06-10T11:27:19.745679 #28534]  INFO -- : (0.000190s) BEGIN
I, [2019-06-10T11:27:19.747436 #28534]  INFO -- : (0.001465s) INSERT INTO "clients" ("name", "ext_id", "ext_project_id", "ts_version", "ts_rest", "client_id", "project_id") VALUES ('test', 1, 1, 1.0, '{"a":1}'::jsonb, 1, 1) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "ts_version" = "excluded"."ts_version", "ts_rest" = "excluded"."ts_rest" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2019-06-10T11:27:19.753861 #28534]  INFO -- : (0.006134s) COMMIT
I, [2019-06-10T11:27:19.755791 #28534]  INFO -- : (0.000093s) BEGIN
I, [2019-06-10T11:27:19.756126 #28534]  INFO -- : (0.000255s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version", "ts_rest") VALUES (1, 1, 'test', 1, 1, 1.0, '{"a":1}'::jsonb), (2, 1, 'test2', 2, 1, 1.0, '{"a":2}'::jsonb) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "client_id" = "excluded"."client_id", "project_id" = "excluded"."project_id", "name" = "excluded"."name", "ts_version" = "excluded"."ts_version", "ts_rest" = "excluded"."ts_rest" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2019-06-10T11:27:19.756536 #28534]  INFO -- : (0.000317s) COMMIT
I, [2019-06-10T11:27:19.781864 #28534]  INFO -- : (0.000561s) BEGIN
I, [2019-06-10T11:27:19.782976 #28534]  INFO -- : (0.000878s) INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-06-10T11:27:19.783386 #28534]  INFO -- : (0.000310s) COMMIT
I, [2019-06-10T11:27:19.790792 #28534]  INFO -- : (0.001120s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"users"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2019-06-10T11:27:19.792535 #28534]  INFO -- : (0.000104s) BEGIN
I, [2019-06-10T11:27:19.793016 #28534]  INFO -- : (0.000385s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id") VALUES ('test3', 222, 333, 124.0, 'mail3', 1) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-06-10T11:27:19.793475 #28534]  INFO -- : (0.000309s) COMMIT
I, [2019-06-10T11:27:19.795027 #28534]  INFO -- : (0.000751s) BEGIN
E, [2019-06-10T11:27:19.795845 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_pkey"
DETAIL:  Key (id)=(111) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-06-10T11:27:19.798445 #28534]  INFO -- : (0.002088s) ROLLBACK
I, [2019-06-10T11:27:19.802432 #28534]  INFO -- : (0.002141s) BEGIN
E, [2019-06-10T11:27:19.803883 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_pkey"
DETAIL:  Key (id)=(111) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-06-10T11:27:19.805682 #28534]  INFO -- : (0.001382s) ROLLBACK
I, [2019-06-10T11:27:19.808143 #28534]  INFO -- : (0.000214s) BEGIN
E, [2019-06-10T11:27:19.808682 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_pkey"
DETAIL:  Key (id)=(111) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-06-10T11:27:19.809049 #28534]  INFO -- : (0.000091s) ROLLBACK
I, [2019-06-10T11:27:19.814515 #28534]  INFO -- : (0.003616s) BEGIN
I, [2019-06-10T11:27:19.825095 #28534]  INFO -- : (0.001206s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-06-10T11:27:19.825770 #28534]  INFO -- : (0.000391s) COMMIT
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000305s) BEGIN
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000289s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id", "first_sync_time") VALUES ('test3', 222, 333, 124.0, 'mail3', 1, '2019-01-01 03:00:00.000000+0300') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000397s) COMMIT
I, [2019-02-04T04:56:00.000000 #28534]  INFO -- : (0.000127s) BEGIN
I, [2019-02-04T04:56:00.000000 #28534]  INFO -- : (0.000335s) INSERT INTO "clients" ("name", "ext_id", "ext_project_id", "ts_version", "client_id", "project_id") VALUES ('test2', 222, 222, 123.0, 333, 333) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "ts_version" = "excluded"."ts_version" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2019-02-04T04:56:00.000000 #28534]  INFO -- : (0.000371s) COMMIT
I, [2019-02-04T04:56:00.000000 #28534]  INFO -- : (0.000248s) BEGIN
E, [2019-02-04T04:56:00.000000 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #28534]  INFO -- : (0.000060s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #28534]  INFO -- : (0.000081s) BEGIN
E, [2019-02-04T04:56:00.000000 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #28534]  INFO -- : (0.000066s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #28534]  INFO -- : (0.000086s) BEGIN
E, [2019-02-04T04:56:00.000000 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #28534]  INFO -- : (0.000062s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #28534]  INFO -- : (0.000110s) BEGIN
E, [2019-02-04T04:56:00.000000 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #28534]  INFO -- : (0.000055s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000139s) BEGIN
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000336s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id", "first_sync_time") VALUES ('test3', 222, 333, 124.0, 'mail3', 1, '2019-01-01 03:00:00.000000+0300') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000332s) COMMIT
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000101s) BEGIN
E, [2019-01-01T03:00:00.000000 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test2', 111, 111, 123)
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000119s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000430s) BEGIN
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.001192s) INSERT INTO "players" ("external_id", "project_id", "email", "online_status", "version", "rest") VALUES (111, 'pid1', '435', true, 12.343, NULL), (222, 'pid2', 'fghgf', false, 122.565, NULL)
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000322s) COMMIT
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000602s) DELETE FROM "players" WHERE (("external_id" = 222) AND ("project_id" = 'pid2')) RETURNING *
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000095s) BEGIN
E, [2019-01-01T03:00:00.000000 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "items_pkey"
DETAIL:  Key (id)=(1) already exists.: INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000207s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000132s) BEGIN
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000256s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000550s) COMMIT
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000114s) BEGIN
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000246s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.003893s) COMMIT
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000121s) BEGIN
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000162s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000176s) COMMIT
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000047s) BEGIN
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000150s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 4)
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000165s) COMMIT
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000073s) BEGIN
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000154s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000181s) COMMIT
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000054s) BEGIN
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000135s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 5)
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000144s) COMMIT
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000065s) BEGIN
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000124s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000151s) COMMIT
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000046s) BEGIN
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000126s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 6)
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000152s) COMMIT
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000052s) BEGIN
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000116s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000147s) COMMIT
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000055s) BEGIN
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000130s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 7)
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000145s) COMMIT
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000066s) BEGIN
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000176s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000230s) COMMIT
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000078s) BEGIN
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000431s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000559s) COMMIT
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000095s) BEGIN
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000261s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000265s) COMMIT
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000084s) BEGIN
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000155s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000267s) COMMIT
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000069s) BEGIN
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000138s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000249s) COMMIT
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000069s) BEGIN
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000156s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000226s) COMMIT
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000266s) BEGIN
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000839s) INSERT INTO "clients" ("ext_id", "ts_rest", "ts_version", "ext_project_id", "client_id", "project_id", "name") VALUES (33, '{"name":"test1","nickname":"test2","balance":1221,"email":"mail@example.com"}'::jsonb, 123.34534, 333, 22, 22, 'native_name') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "ts_rest" = "excluded"."ts_rest", "ts_version" = "excluded"."ts_version" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000260s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000730s) SELECT count(*) AS "count" FROM "clients" LIMIT 1
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000097s) ROLLBACK
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000068s) BEGIN
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000199s) INSERT INTO "clients" ("ext_id", "ts_rest", "ts_version", "ext_project_id", "client_id", "project_id", "name") VALUES (33, '{"name":"test1","nickname":"test2","balance":1221,"email":"mail@example.com"}'::jsonb, 123.34534, 333, 22, 22, 'native_name') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "ts_rest" = "excluded"."ts_rest", "ts_version" = "excluded"."ts_version" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000293s) COMMIT
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000048s) BEGIN
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000149s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000258s) COMMIT
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000159s) SELECT count(*) AS "count" FROM "clients" LIMIT 1
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000071s) BEGIN
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000400s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID'), ('mail2@example.com', 34, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000502s) COMMIT
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000261s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000229s) BEGIN
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000233s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 32, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000312s) COMMIT
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000500s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000146s) BEGIN
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000270s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 32, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000335s) COMMIT
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000160s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000162s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000084s) BEGIN
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000275s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000432s) COMMIT
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000176s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000107s) BEGIN
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000266s) INSERT INTO "players" ("email", "rest", "external_id", "version", "project_id") VALUES ('mail@example.com', '{"first":"1","name":"test1","nickname":"test2","balance":1221}'::jsonb, 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "rest" = "excluded"."rest", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000344s) COMMIT
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000146s) SELECT * FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000147s) CREATE TABLE IF NOT EXISTS "players_part_3"(like "players_part_1" INCLUDING ALL);
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.001058s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('players_part_1' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.001341s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('players_part_3' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000071s) BEGIN
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000862s) INSERT INTO players_part_1 ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID'), ('mail3@example.com', 35, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce(players_part_1."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000723s) INSERT INTO players_part_3 ("email", "external_id", "version", "project_id") VALUES ('mail2@example.com', 34, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce(players_part_3."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000301s) COMMIT
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000170s) SELECT count(*) AS "count" FROM "players_part_1" LIMIT 1
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000114s) SELECT * FROM "players_part_1" LIMIT 1
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000133s) SELECT * FROM "players_part_1"
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000182s) SELECT count(*) AS "count" FROM "players_part_3" LIMIT 1
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000114s) SELECT * FROM "players_part_3" LIMIT 1
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000084s) CREATE TABLE IF NOT EXISTS "players_part_3"(like "players_part_1" INCLUDING ALL);
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000077s) BEGIN
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000182s) INSERT INTO players_part_1 ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce(players_part_1."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.001995s) COMMIT
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000675s) SELECT count(*) AS "count" FROM "players_part_1" LIMIT 1
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000311s) BEGIN
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.001519s) SELECT pg_attribute.attname AS pk FROM pg_class, pg_attribute, pg_index, pg_namespace WHERE pg_class.oid = pg_attribute.attrelid AND pg_class.relnamespace = pg_namespace.oid AND pg_class.oid = pg_index.indrelid AND pg_index.indkey[0] = pg_attribute.attnum AND pg_index.indisprimary = 't' AND pg_class.oid = CAST(CAST('"clients"' AS regclass) AS oid)
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000330s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id") VALUES (33, 777, 'test1', 666, 9) RETURNING "client_id"
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000774s) INSERT INTO "players" ("email", "rest", "external_id", "version", "project_id") VALUES ('mail@example.com', '{"first":"1","name":"test1","nickname":"hi_i_got_hacked","balance":1221}'::jsonb, 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "rest" = "excluded"."rest", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000441s) COMMIT
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000214s) SELECT count(*) AS "count" FROM "clients" LIMIT 1
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000121s) BEGIN
E, [2010-01-01T15:00:00.000000 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(33, 777) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id") VALUES (33, 777, 'test1', 666, 9) RETURNING "client_id"
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000100s) ROLLBACK
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000075s) BEGIN
E, [2010-01-01T15:00:00.000000 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000145s) ROLLBACK
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000054s) BEGIN
E, [2010-01-01T15:00:00.000000 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000046s) ROLLBACK
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000072s) BEGIN
E, [2010-01-01T15:00:00.000000 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000065s) ROLLBACK
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000072s) BEGIN
E, [2010-01-01T15:00:00.000000 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000105s) ROLLBACK
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000084s) BEGIN
E, [2010-01-01T15:00:00.000000 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000325s) ROLLBACK
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000356s) BEGIN
E, [2010-01-01T15:00:00.000000 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_pkey"
DETAIL:  Key (id)=(111) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000081s) ROLLBACK
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.003150s) BEGIN
E, [2010-01-01T15:00:00.000000 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_pkey"
DETAIL:  Key (id)=(111) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000154s) ROLLBACK
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000641s) BEGIN
E, [2010-01-01T15:00:00.000000 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_pkey"
DETAIL:  Key (id)=(111) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000071s) ROLLBACK
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000247s) BEGIN
E, [2010-01-01T15:00:00.000000 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_pkey"
DETAIL:  Key (id)=(111) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2010-01-01T15:00:00.000000 #28534]  INFO -- : (0.000108s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000090s) BEGIN
E, [2019-01-01T03:00:00.000000 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test2', 111, 111, 123)
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000048s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000051s) BEGIN
E, [2019-01-01T03:00:00.000000 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "players_pkey"
DETAIL:  Key (external_id)=(111) already exists.: INSERT INTO "players" ("external_id", "project_id", "email", "online_status", "version", "rest") VALUES (111, 'pid1', '435', true, 12.343, NULL), (222, 'pid2', 'fghgf', false, 122.565, NULL)
I, [2019-01-01T03:00:00.000000 #28534]  INFO -- : (0.000046s) ROLLBACK
E, [2019-01-01T03:00:00.000000 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "items_pkey"
DETAIL:  Key (id)=(1) already exists.: INSERT INTO "items" ("id", "name", "price") VALUES (1, 'test', 123) RETURNING "id"
E, [2019-01-01T03:00:00.000000 #28534] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "items_pkey"
DETAIL:  Key (id)=(1) already exists.: INSERT INTO "items" ("id", "name", "price") VALUES (1, 'test', 123) RETURNING "id"
I, [2019-06-10T11:58:00.937666 #30532]  INFO -- : (0.019435s) DROP TABLE IF EXISTS "items";
CREATE TABLE "items" (
  "id" bigserial primary key,
  "name" varchar(255) NOT NULL,
  "price" double precision NOT NULL
);

DROP TABLE IF EXISTS "players";
CREATE TABLE "players" (
  "external_id" int primary key,
  "project_id" text,
  "email" varchar(255) NOT NULL,
  "online_status" boolean,
  "version" decimal,
  "rest" jsonb
);

DROP TABLE IF EXISTS "players_part_1";
CREATE TABLE "players_part_1" (like "players" INCLUDING ALL);

DROP TABLE IF EXISTS "clients";
CREATE TABLE "clients" (
  "client_id" int,
  "project_id" int,
  "name" varchar(255) NOT NULL,
  "ext_id" int NOT NULL,
  "ext_project_id" int NOT NULL,
  "ts_version" decimal,
  "ts_rest" jsonb,
  PRIMARY KEY (client_id, project_id),
  UNIQUE (ext_id, ext_project_id)
);

DROP TABLE IF EXISTS "users";
CREATE TABLE "users" (
  "id" int primary key,
  "name" varchar(255) NOT NULL,
  "email" varchar(255) NOT NULL,
  "ext_id" int NOT NULL,
  "ext_project_id" int NOT NULL,
  "version" decimal,
  "rest" jsonb,
  "first_sync_time" timestamp without time zone,
  UNIQUE (ext_id, ext_project_id)
);


I, [2019-06-10T11:58:01.046727 #30532]  INFO -- : (0.002329s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"items"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2018-01-01T15:00:00.000000 #30532]  INFO -- : (0.001247s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"clients"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2018-01-01T15:00:00.000000 #30532]  INFO -- : (0.001776s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"players"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2018-01-01T15:00:00.000000 #30532]  INFO -- : (0.000116s) BEGIN
E, [2018-01-01T15:00:00.000000 #30532] ERROR -- : PG::NotNullViolation: ERROR:  null value in column "client_id" violates not-null constraint
DETAIL:  Failing row contains (null, null, test, 1, 1, 1.0, {"a": 1}).: INSERT INTO "clients" ("name", "ext_id", "ext_project_id", "ts_version", "ts_rest") VALUES ('test', 1, 1, 1.0, '{"a":1}'::jsonb) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "ts_version" = "excluded"."ts_version", "ts_rest" = "excluded"."ts_rest" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2018-01-01T15:00:00.000000 #30532]  INFO -- : (0.000070s) ROLLBACK
I, [2018-01-01T15:00:00.000000 #30532]  INFO -- : (0.000066s) BEGIN
I, [2018-01-01T15:00:00.000000 #30532]  INFO -- : (0.000461s) INSERT INTO "clients" ("name", "ext_id", "ext_project_id", "ts_version", "ts_rest", "client_id", "project_id") VALUES ('test', 1, 1, 1.0, '{"a":1}'::jsonb, 1, 1) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "ts_version" = "excluded"."ts_version", "ts_rest" = "excluded"."ts_rest" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2018-01-01T15:00:00.000000 #30532]  INFO -- : (0.000888s) COMMIT
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.001084s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"users"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000082s) BEGIN
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000536s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id", "first_sync_time") VALUES ('test3', 222, 333, 124.0, 'mail3', 1, '2019-01-01 03:00:00.000000+0300') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000312s) COMMIT
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000096s) BEGIN
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000273s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version", "ts_rest") VALUES (1, 1, 'test', 1, 1, 1.0, '{"a":1}'::jsonb), (2, 1, 'test2', 2, 1, 1.0, '{"a":2}'::jsonb) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "client_id" = "excluded"."client_id", "project_id" = "excluded"."project_id", "name" = "excluded"."name", "ts_version" = "excluded"."ts_version", "ts_rest" = "excluded"."ts_rest" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000372s) COMMIT
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000092s) BEGIN
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000179s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000329s) COMMIT
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000076s) BEGIN
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000204s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id", "first_sync_time") VALUES ('test3', 222, 333, 124.0, 'mail3', 1, '2019-01-01 03:00:00.000000+0300') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000311s) COMMIT
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000077s) BEGIN
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000186s) INSERT INTO "clients" ("name", "client_id", "project_id", "ts_version", "ext_id", "ext_project_id") VALUES ('test2', 222, 222, 124.0, 333, 333) ON CONFLICT ("client_id", "project_id") DO UPDATE SET "name" = "excluded"."name", "ts_version" = "excluded"."ts_version" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000313s) COMMIT
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000091s) BEGIN
E, [2019-02-04T04:56:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000055s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000107s) BEGIN
E, [2019-02-04T04:56:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000068s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000064s) BEGIN
E, [2019-02-04T04:56:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000054s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000063s) BEGIN
E, [2019-02-04T04:56:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000054s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000064s) BEGIN
E, [2019-02-04T04:56:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_ext_id_ext_project_id_key"
DETAIL:  Key (ext_id, ext_project_id)=(222, 333) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000057s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000063s) BEGIN
E, [2019-02-04T04:56:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_ext_id_ext_project_id_key"
DETAIL:  Key (ext_id, ext_project_id)=(222, 333) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000053s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000062s) BEGIN
E, [2019-02-04T04:56:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_ext_id_ext_project_id_key"
DETAIL:  Key (ext_id, ext_project_id)=(222, 333) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000062s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000098s) BEGIN
E, [2019-02-04T04:56:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_ext_id_ext_project_id_key"
DETAIL:  Key (ext_id, ext_project_id)=(222, 333) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000055s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000107s) BEGIN
E, [2019-02-04T04:56:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test2', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000098s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000070s) BEGIN
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000397s) INSERT INTO "players" ("external_id", "project_id", "email", "online_status", "version", "rest") VALUES (111, 'pid1', '435', true, 12.343, NULL), (222, 'pid2', 'fghgf', false, 122.565, NULL)
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000358s) COMMIT
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000508s) DELETE FROM "players" WHERE (("external_id" = 222) AND ("project_id" = 'pid2')) RETURNING *
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000503s) SELECT pg_attribute.attname AS pk FROM pg_class, pg_attribute, pg_index, pg_namespace WHERE pg_class.oid = pg_attribute.attrelid AND pg_class.relnamespace = pg_namespace.oid AND pg_class.oid = pg_index.indrelid AND pg_index.indkey[0] = pg_attribute.attnum AND pg_index.indisprimary = 't' AND pg_class.oid = CAST(CAST('"items"' AS regclass) AS oid)
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000778s) INSERT INTO "items" ("id", "name", "price") VALUES (1, 'test', 123) RETURNING "id"
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000069s) BEGIN
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000232s) DELETE FROM "items" WHERE ("id" = 1) RETURNING *
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000066s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #30532]  INFO -- : (0.000190s) SELECT count(*) AS "count" FROM "items" LIMIT 1
E, [2019-02-04T04:56:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "items_pkey"
DETAIL:  Key (id)=(1) already exists.: INSERT INTO "items" ("id", "name", "price") VALUES (1, 'test', 123) RETURNING "id"
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000452s) BEGIN
E, [2019-01-01T03:00:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000158s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000066s) BEGIN
E, [2019-01-01T03:00:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000088s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000065s) BEGIN
E, [2019-01-01T03:00:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000071s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000059s) BEGIN
E, [2019-01-01T03:00:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000054s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000058s) BEGIN
E, [2019-01-01T03:00:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000054s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000060s) BEGIN
E, [2019-01-01T03:00:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_ext_id_ext_project_id_key"
DETAIL:  Key (ext_id, ext_project_id)=(222, 333) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000054s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000057s) BEGIN
E, [2019-01-01T03:00:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_ext_id_ext_project_id_key"
DETAIL:  Key (ext_id, ext_project_id)=(222, 333) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000054s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000057s) BEGIN
E, [2019-01-01T03:00:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_ext_id_ext_project_id_key"
DETAIL:  Key (ext_id, ext_project_id)=(222, 333) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000055s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000058s) BEGIN
E, [2019-01-01T03:00:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_ext_id_ext_project_id_key"
DETAIL:  Key (ext_id, ext_project_id)=(222, 333) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000056s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000061s) BEGIN
E, [2019-01-01T03:00:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test2', 111, 111, 123)
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000053s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000059s) BEGIN
E, [2019-01-01T03:00:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "players_pkey"
DETAIL:  Key (external_id)=(111) already exists.: INSERT INTO "players" ("external_id", "project_id", "email", "online_status", "version", "rest") VALUES (111, 'pid1', '435', true, 12.343, NULL), (222, 'pid2', 'fghgf', false, 122.565, NULL)
I, [2019-01-01T03:00:00.000000 #30532]  INFO -- : (0.000051s) ROLLBACK
E, [2019-01-01T03:00:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "items_pkey"
DETAIL:  Key (id)=(1) already exists.: INSERT INTO "items" ("id", "name", "price") VALUES (1, 'test', 123) RETURNING "id"
E, [2019-01-01T03:00:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "items_pkey"
DETAIL:  Key (id)=(1) already exists.: INSERT INTO "items" ("id", "name", "price") VALUES (1, 'test', 123) RETURNING "id"
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000085s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000443s) INSERT INTO "clients" ("ext_id", "ts_rest", "ts_version", "ext_project_id", "client_id", "project_id", "name") VALUES (33, '{"name":"test1","nickname":"test2","balance":1221,"email":"mail@example.com"}'::jsonb, 123.34534, 333, 22, 22, 'native_name') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "ts_rest" = "excluded"."ts_rest", "ts_version" = "excluded"."ts_version" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000270s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000373s) SELECT count(*) AS "count" FROM "clients" LIMIT 1
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000109s) ROLLBACK
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000118s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000206s) INSERT INTO "clients" ("ext_id", "ts_rest", "ts_version", "ext_project_id", "client_id", "project_id", "name") VALUES (33, '{"name":"test1","nickname":"test2","balance":1221,"email":"mail@example.com"}'::jsonb, 123.34534, 333, 22, 22, 'native_name') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "ts_rest" = "excluded"."ts_rest", "ts_version" = "excluded"."ts_version" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000514s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000074s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000196s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000312s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000153s) SELECT count(*) AS "count" FROM "clients" LIMIT 1
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000080s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000204s) INSERT INTO "players" ("email", "rest", "external_id", "version", "project_id") VALUES ('mail@example.com', '{"first":"1","name":"test1","nickname":"test2","balance":1221}'::jsonb, 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "rest" = "excluded"."rest", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000368s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000150s) SELECT * FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000111s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000411s) SELECT pg_attribute.attname AS pk FROM pg_class, pg_attribute, pg_index, pg_namespace WHERE pg_class.oid = pg_attribute.attrelid AND pg_class.relnamespace = pg_namespace.oid AND pg_class.oid = pg_index.indrelid AND pg_index.indkey[0] = pg_attribute.attnum AND pg_index.indisprimary = 't' AND pg_class.oid = CAST(CAST('"clients"' AS regclass) AS oid)
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000123s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id") VALUES (33, 777, 'test1', 666, 9) RETURNING "client_id"
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000159s) INSERT INTO "players" ("email", "rest", "external_id", "version", "project_id") VALUES ('mail@example.com', '{"first":"1","name":"test1","nickname":"hi_i_got_hacked","balance":1221}'::jsonb, 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "rest" = "excluded"."rest", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000378s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000155s) SELECT count(*) AS "count" FROM "clients" LIMIT 1
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000099s) BEGIN
E, [2010-01-01T15:00:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(33, 777) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id") VALUES (33, 777, 'test1', 666, 9) RETURNING "client_id"
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000057s) ROLLBACK
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000065s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000206s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID'), ('mail2@example.com', 34, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000536s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000139s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000152s) CREATE TABLE IF NOT EXISTS "players_part_3"(like "players_part_1" INCLUDING ALL);
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.001574s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('players_part_1' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.001081s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('players_part_3' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000073s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000498s) INSERT INTO players_part_1 ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID'), ('mail3@example.com', 35, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce(players_part_1."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000237s) INSERT INTO players_part_3 ("email", "external_id", "version", "project_id") VALUES ('mail2@example.com', 34, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce(players_part_3."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000395s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000217s) SELECT count(*) AS "count" FROM "players_part_1" LIMIT 1
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000150s) SELECT * FROM "players_part_1" LIMIT 1
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000132s) SELECT * FROM "players_part_1"
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000193s) SELECT count(*) AS "count" FROM "players_part_3" LIMIT 1
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000119s) SELECT * FROM "players_part_3" LIMIT 1
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000102s) CREATE TABLE IF NOT EXISTS "players_part_3"(like "players_part_1" INCLUDING ALL);
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000128s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000371s) INSERT INTO players_part_1 ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce(players_part_1."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000512s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000342s) SELECT count(*) AS "count" FROM "players_part_1" LIMIT 1
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000195s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000110s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000193s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000361s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000170s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000116s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000203s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 32, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000292s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000153s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000078s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000191s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 32, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000366s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000167s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000148s) BEGIN
E, [2010-01-01T15:00:00.000000 #30532] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "items_pkey"
DETAIL:  Key (id)=(1) already exists.: INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000070s) ROLLBACK
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000073s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000160s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000414s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000123s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000204s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 2)
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000330s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000082s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000317s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000326s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000075s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000155s) DELETE FROM "items" WHERE "id" = 3
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000349s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000089s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000162s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000371s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000097s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000184s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000282s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000159s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000156s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000379s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000096s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000190s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 6)
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000361s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000090s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000163s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000376s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000099s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000174s) DELETE FROM "items" WHERE "id" = 7
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000553s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000080s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000161s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000418s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000076s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000240s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000314s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000070s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000198s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000338s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000083s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000239s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 10)
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000550s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000068s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000151s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000504s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000067s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000132s) DELETE FROM "items" WHERE "id" = 11
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000322s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000073s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000220s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000318s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000064s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000182s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 12)
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000540s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000073s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000159s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000510s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000071s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000163s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 13)
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000277s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000087s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000148s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000507s) COMMIT
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000057s) BEGIN
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000150s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 14)
I, [2010-01-01T15:00:00.000000 #30532]  INFO -- : (0.000494s) COMMIT
I, [2019-06-10T12:25:24.941164 #35371]  INFO -- : (0.019825s) DROP TABLE IF EXISTS "items";
CREATE TABLE "items" (
  "id" bigserial primary key,
  "name" varchar(255) NOT NULL,
  "price" double precision NOT NULL
);

DROP TABLE IF EXISTS "players";
CREATE TABLE "players" (
  "external_id" int primary key,
  "project_id" text,
  "email" varchar(255) NOT NULL,
  "online_status" boolean,
  "version" decimal,
  "rest" jsonb
);

DROP TABLE IF EXISTS "players_part_1";
CREATE TABLE "players_part_1" (like "players" INCLUDING ALL);

DROP TABLE IF EXISTS "clients";
CREATE TABLE "clients" (
  "client_id" int,
  "project_id" int,
  "name" varchar(255) NOT NULL,
  "ext_id" int NOT NULL,
  "ext_project_id" int NOT NULL,
  "ts_version" decimal,
  "ts_rest" jsonb,
  PRIMARY KEY (client_id, project_id),
  UNIQUE (ext_id, ext_project_id)
);

DROP TABLE IF EXISTS "users";
CREATE TABLE "users" (
  "id" int primary key,
  "name" varchar(255) NOT NULL,
  "email" varchar(255) NOT NULL,
  "ext_id" int NOT NULL,
  "ext_project_id" int NOT NULL,
  "version" decimal,
  "rest" jsonb,
  "first_sync_time" timestamp without time zone,
  UNIQUE (ext_id, ext_project_id)
);


I, [2019-06-10T12:25:25.055698 #35371]  INFO -- : (0.002078s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"items"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2018-01-01T15:00:00.000000 #35371]  INFO -- : (0.000996s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"clients"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2018-01-01T15:00:00.000000 #35371]  INFO -- : (0.001379s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"players"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2018-01-01T15:00:00.000000 #35371]  INFO -- : (0.000127s) BEGIN
E, [2018-01-01T15:00:00.000000 #35371] ERROR -- : PG::NotNullViolation: ERROR:  null value in column "client_id" violates not-null constraint
DETAIL:  Failing row contains (null, null, test, 1, 1, 1.0, {"a": 1}).: INSERT INTO "clients" ("name", "ext_id", "ext_project_id", "ts_version", "ts_rest") VALUES ('test', 1, 1, 1.0, '{"a":1}'::jsonb) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "ts_version" = "excluded"."ts_version", "ts_rest" = "excluded"."ts_rest" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2018-01-01T15:00:00.000000 #35371]  INFO -- : (0.000129s) ROLLBACK
I, [2018-01-01T15:00:00.000000 #35371]  INFO -- : (0.000099s) BEGIN
I, [2018-01-01T15:00:00.000000 #35371]  INFO -- : (0.000483s) INSERT INTO "clients" ("name", "ext_id", "ext_project_id", "ts_version", "ts_rest", "client_id", "project_id") VALUES ('test', 1, 1, 1.0, '{"a":1}'::jsonb, 1, 1) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "ts_version" = "excluded"."ts_version", "ts_rest" = "excluded"."ts_rest" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2018-01-01T15:00:00.000000 #35371]  INFO -- : (0.000788s) COMMIT
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000975s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"users"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000107s) BEGIN
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000510s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id", "first_sync_time") VALUES ('test3', 222, 333, 124.0, 'mail3', 1, '2019-01-01 03:00:00.000000+0300') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000499s) COMMIT
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000079s) BEGIN
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000250s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version", "ts_rest") VALUES (1, 1, 'test', 1, 1, 1.0, '{"a":1}'::jsonb), (2, 1, 'test2', 2, 1, 1.0, '{"a":2}'::jsonb) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "client_id" = "excluded"."client_id", "project_id" = "excluded"."project_id", "name" = "excluded"."name", "ts_version" = "excluded"."ts_version", "ts_rest" = "excluded"."ts_rest" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000383s) COMMIT
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000126s) BEGIN
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000168s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000302s) COMMIT
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000066s) BEGIN
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000194s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id", "first_sync_time") VALUES ('test3', 222, 333, 124.0, 'mail3', 1, '2019-01-01 03:00:00.000000+0300') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000396s) COMMIT
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000088s) BEGIN
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000195s) INSERT INTO "clients" ("name", "client_id", "project_id", "ts_version", "ext_id", "ext_project_id") VALUES ('test2', 222, 222, 124.0, 333, 333) ON CONFLICT ("client_id", "project_id") DO UPDATE SET "name" = "excluded"."name", "ts_version" = "excluded"."ts_version" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000270s) COMMIT
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000068s) BEGIN
E, [2019-02-04T04:56:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000053s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000060s) BEGIN
E, [2019-02-04T04:56:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000050s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000068s) BEGIN
E, [2019-02-04T04:56:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000121s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000090s) BEGIN
E, [2019-02-04T04:56:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000051s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000067s) BEGIN
E, [2019-02-04T04:56:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_ext_id_ext_project_id_key"
DETAIL:  Key (ext_id, ext_project_id)=(222, 333) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000094s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000093s) BEGIN
E, [2019-02-04T04:56:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_ext_id_ext_project_id_key"
DETAIL:  Key (ext_id, ext_project_id)=(222, 333) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000051s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000127s) BEGIN
E, [2019-02-04T04:56:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_ext_id_ext_project_id_key"
DETAIL:  Key (ext_id, ext_project_id)=(222, 333) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000063s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000073s) BEGIN
E, [2019-02-04T04:56:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_ext_id_ext_project_id_key"
DETAIL:  Key (ext_id, ext_project_id)=(222, 333) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000055s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000292s) BEGIN
E, [2019-02-04T04:56:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test2', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000063s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000061s) BEGIN
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000407s) INSERT INTO "players" ("external_id", "project_id", "email", "online_status", "version", "rest") VALUES (111, 'pid1', '435', true, 12.343, NULL), (222, 'pid2', 'fghgf', false, 122.565, NULL)
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000363s) COMMIT
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000849s) DELETE FROM "players" WHERE (("external_id" = 222) AND ("project_id" = 'pid2')) RETURNING *
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000480s) SELECT pg_attribute.attname AS pk FROM pg_class, pg_attribute, pg_index, pg_namespace WHERE pg_class.oid = pg_attribute.attrelid AND pg_class.relnamespace = pg_namespace.oid AND pg_class.oid = pg_index.indrelid AND pg_index.indkey[0] = pg_attribute.attnum AND pg_index.indisprimary = 't' AND pg_class.oid = CAST(CAST('"items"' AS regclass) AS oid)
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000673s) INSERT INTO "items" ("id", "name", "price") VALUES (1, 'test', 123) RETURNING "id"
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000064s) BEGIN
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000246s) DELETE FROM "items" WHERE ("id" = 1) RETURNING *
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000078s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #35371]  INFO -- : (0.000218s) SELECT count(*) AS "count" FROM "items" LIMIT 1
E, [2019-02-04T04:56:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "items_pkey"
DETAIL:  Key (id)=(1) already exists.: INSERT INTO "items" ("id", "name", "price") VALUES (1, 'test', 123) RETURNING "id"
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000153s) BEGIN
E, [2019-01-01T03:00:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000064s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000064s) BEGIN
E, [2019-01-01T03:00:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000063s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000062s) BEGIN
E, [2019-01-01T03:00:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000064s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000063s) BEGIN
E, [2019-01-01T03:00:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000057s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000097s) BEGIN
E, [2019-01-01T03:00:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000056s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000093s) BEGIN
E, [2019-01-01T03:00:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_ext_id_ext_project_id_key"
DETAIL:  Key (ext_id, ext_project_id)=(222, 333) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000065s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000064s) BEGIN
E, [2019-01-01T03:00:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_ext_id_ext_project_id_key"
DETAIL:  Key (ext_id, ext_project_id)=(222, 333) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000053s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000058s) BEGIN
E, [2019-01-01T03:00:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_ext_id_ext_project_id_key"
DETAIL:  Key (ext_id, ext_project_id)=(222, 333) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000151s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000060s) BEGIN
E, [2019-01-01T03:00:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "users_ext_id_ext_project_id_key"
DETAIL:  Key (ext_id, ext_project_id)=(222, 333) already exists.: INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000056s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000060s) BEGIN
E, [2019-01-01T03:00:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(111, 111) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test2', 111, 111, 123)
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000059s) ROLLBACK
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000061s) BEGIN
E, [2019-01-01T03:00:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "players_pkey"
DETAIL:  Key (external_id)=(111) already exists.: INSERT INTO "players" ("external_id", "project_id", "email", "online_status", "version", "rest") VALUES (111, 'pid1', '435', true, 12.343, NULL), (222, 'pid2', 'fghgf', false, 122.565, NULL)
I, [2019-01-01T03:00:00.000000 #35371]  INFO -- : (0.000059s) ROLLBACK
E, [2019-01-01T03:00:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "items_pkey"
DETAIL:  Key (id)=(1) already exists.: INSERT INTO "items" ("id", "name", "price") VALUES (1, 'test', 123) RETURNING "id"
E, [2019-01-01T03:00:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "items_pkey"
DETAIL:  Key (id)=(1) already exists.: INSERT INTO "items" ("id", "name", "price") VALUES (1, 'test', 123) RETURNING "id"
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000119s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000229s) INSERT INTO "clients" ("ext_id", "ts_rest", "ts_version", "ext_project_id", "client_id", "project_id", "name") VALUES (33, '{"name":"test1","nickname":"test2","balance":1221,"email":"mail@example.com"}'::jsonb, 123.34534, 333, 22, 22, 'native_name') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "ts_rest" = "excluded"."ts_rest", "ts_version" = "excluded"."ts_version" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000157s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000164s) SELECT count(*) AS "count" FROM "clients" LIMIT 1
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000063s) ROLLBACK
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000136s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000198s) INSERT INTO "clients" ("ext_id", "ts_rest", "ts_version", "ext_project_id", "client_id", "project_id", "name") VALUES (33, '{"name":"test1","nickname":"test2","balance":1221,"email":"mail@example.com"}'::jsonb, 123.34534, 333, 22, 22, 'native_name') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "ts_rest" = "excluded"."ts_rest", "ts_version" = "excluded"."ts_version" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000697s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000093s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000275s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000535s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000158s) SELECT count(*) AS "count" FROM "clients" LIMIT 1
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000115s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000217s) INSERT INTO "players" ("email", "rest", "external_id", "version", "project_id") VALUES ('mail@example.com', '{"first":"1","name":"test1","nickname":"test2","balance":1221}'::jsonb, 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "rest" = "excluded"."rest", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000382s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000130s) SELECT * FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000088s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000395s) SELECT pg_attribute.attname AS pk FROM pg_class, pg_attribute, pg_index, pg_namespace WHERE pg_class.oid = pg_attribute.attrelid AND pg_class.relnamespace = pg_namespace.oid AND pg_class.oid = pg_index.indrelid AND pg_index.indkey[0] = pg_attribute.attnum AND pg_index.indisprimary = 't' AND pg_class.oid = CAST(CAST('"clients"' AS regclass) AS oid)
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000122s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id") VALUES (33, 777, 'test1', 666, 9) RETURNING "client_id"
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000208s) INSERT INTO "players" ("email", "rest", "external_id", "version", "project_id") VALUES ('mail@example.com', '{"first":"1","name":"test1","nickname":"hi_i_got_hacked","balance":1221}'::jsonb, 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "rest" = "excluded"."rest", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000323s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000155s) SELECT count(*) AS "count" FROM "clients" LIMIT 1
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000118s) BEGIN
E, [2010-01-01T15:00:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "clients_pkey"
DETAIL:  Key (client_id, project_id)=(33, 777) already exists.: INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id") VALUES (33, 777, 'test1', 666, 9) RETURNING "client_id"
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000063s) ROLLBACK
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000086s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000207s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID'), ('mail2@example.com', 34, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000286s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000138s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000139s) CREATE TABLE IF NOT EXISTS "players_part_3"(like "players_part_1" INCLUDING ALL);
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000925s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('players_part_1' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.001148s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('players_part_3' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000076s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000493s) INSERT INTO players_part_1 ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID'), ('mail3@example.com', 35, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce(players_part_1."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000229s) INSERT INTO players_part_3 ("email", "external_id", "version", "project_id") VALUES ('mail2@example.com', 34, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce(players_part_3."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000358s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000192s) SELECT count(*) AS "count" FROM "players_part_1" LIMIT 1
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000147s) SELECT * FROM "players_part_1" LIMIT 1
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000168s) SELECT * FROM "players_part_1"
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000200s) SELECT count(*) AS "count" FROM "players_part_3" LIMIT 1
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000118s) SELECT * FROM "players_part_3" LIMIT 1
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000101s) CREATE TABLE IF NOT EXISTS "players_part_3"(like "players_part_1" INCLUDING ALL);
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000070s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000189s) INSERT INTO players_part_1 ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce(players_part_1."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000409s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000196s) SELECT count(*) AS "count" FROM "players_part_1" LIMIT 1
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000204s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000083s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000198s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000412s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000212s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000091s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000257s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 32, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000394s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000526s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000122s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000240s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 32, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000351s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000160s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000154s) BEGIN
E, [2010-01-01T15:00:00.000000 #35371] ERROR -- : PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "items_pkey"
DETAIL:  Key (id)=(1) already exists.: INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000068s) ROLLBACK
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000067s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000150s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000394s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000096s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000190s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 2)
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000294s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000076s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000152s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000343s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000070s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000140s) DELETE FROM "items" WHERE "id" = 3
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000353s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000119s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000199s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000334s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000087s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000380s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000431s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000231s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000190s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000486s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000087s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000245s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 6)
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000335s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000119s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000167s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000340s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000076s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000150s) DELETE FROM "items" WHERE "id" = 7
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000373s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000089s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000160s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000364s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000074s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000162s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000405s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000077s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000161s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000327s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000109s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000324s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 10)
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000337s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000203s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000511s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000479s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000110s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000309s) DELETE FROM "items" WHERE "id" = 11
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000347s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000136s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000270s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000335s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000084s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000201s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 12)
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000308s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000155s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000343s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000307s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000106s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000319s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 13)
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000373s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000101s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000184s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000434s) COMMIT
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000081s) BEGIN
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000251s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 14)
I, [2010-01-01T15:00:00.000000 #35371]  INFO -- : (0.000451s) COMMIT
I, [2019-06-10T12:27:55.584746 #36159]  INFO -- : (0.026737s) DROP TABLE IF EXISTS "items";
CREATE TABLE "items" (
  "id" bigserial primary key,
  "name" varchar(255) NOT NULL,
  "price" double precision NOT NULL
);

DROP TABLE IF EXISTS "players";
CREATE TABLE "players" (
  "external_id" int primary key,
  "project_id" text,
  "email" varchar(255) NOT NULL,
  "online_status" boolean,
  "version" decimal,
  "rest" jsonb
);

DROP TABLE IF EXISTS "players_part_1";
CREATE TABLE "players_part_1" (like "players" INCLUDING ALL);

DROP TABLE IF EXISTS "clients";
CREATE TABLE "clients" (
  "client_id" int,
  "project_id" int,
  "name" varchar(255) NOT NULL,
  "ext_id" int NOT NULL,
  "ext_project_id" int NOT NULL,
  "ts_version" decimal,
  "ts_rest" jsonb,
  PRIMARY KEY (client_id, project_id),
  UNIQUE (ext_id, ext_project_id)
);

DROP TABLE IF EXISTS "users";
CREATE TABLE "users" (
  "id" int primary key,
  "name" varchar(255) NOT NULL,
  "email" varchar(255) NOT NULL,
  "ext_id" int NOT NULL,
  "ext_project_id" int NOT NULL,
  "version" decimal,
  "rest" jsonb,
  "first_sync_time" timestamp without time zone,
  UNIQUE (ext_id, ext_project_id)
);

I, [2019-06-10T12:27:55.802604 #36159]  INFO -- : (0.003225s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"items"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2019-06-10T12:27:55.816846 #36159]  INFO -- : (0.005454s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-06-10T12:27:55.844368 #36159]  INFO -- : (0.027227s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-06-10T12:27:55.858953 #36159]  INFO -- : (0.000188s) BEGIN
I, [2019-06-10T12:27:55.862703 #36159]  INFO -- : (0.000732s) SAVEPOINT autopoint_1
I, [2019-06-10T12:27:55.867989 #36159]  INFO -- : (0.001827s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"clients"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2019-06-10T12:27:55.868721 #36159]  INFO -- : (0.000104s) RELEASE SAVEPOINT autopoint_1
I, [2019-06-10T12:27:55.871124 #36159]  INFO -- : (0.000151s) SAVEPOINT autopoint_1
I, [2019-06-10T12:27:55.872981 #36159]  INFO -- : (0.001062s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"players"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2019-06-10T12:27:55.873328 #36159]  INFO -- : (0.000080s) RELEASE SAVEPOINT autopoint_1
I, [2019-06-10T12:27:55.876952 #36159]  INFO -- : (0.001259s) INSERT INTO "clients" ("ext_id", "ts_rest", "ts_version", "ext_project_id", "client_id", "project_id", "name") VALUES (33, '{"name":"test1","nickname":"test2","balance":1221,"email":"mail@example.com"}'::jsonb, 123.34534, 333, 22, 22, 'native_name') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "ts_rest" = "excluded"."ts_rest", "ts_version" = "excluded"."ts_version" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2019-06-10T12:27:55.885149 #36159]  INFO -- : (0.005886s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2019-06-10T12:27:55.885870 #36159]  INFO -- : (0.000390s) SELECT count(*) AS "count" FROM "clients" LIMIT 1
I, [2019-06-10T12:27:55.887098 #36159]  INFO -- : (0.000249s) DELETE FROM "clients" WHERE (("ext_id" = 33) AND ("ext_project_id" = 333)) RETURNING *
I, [2019-06-10T12:27:55.887506 #36159]  INFO -- : (0.000172s) DELETE FROM "players" WHERE ("external_id" = 33) RETURNING *
I, [2019-06-10T12:27:55.887778 #36159]  INFO -- : (0.000180s) SELECT count(*) AS "count" FROM "clients" LIMIT 1
I, [2019-06-10T12:27:55.888221 #36159]  INFO -- : (0.000310s) COMMIT
I, [2019-06-10T12:27:55.889650 #36159]  INFO -- : (0.000434s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-06-10T12:27:55.907472 #36159]  INFO -- : (0.017693s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-06-10T12:27:55.909039 #36159]  INFO -- : (0.000169s) BEGIN
I, [2019-06-10T12:27:55.916519 #36159]  INFO -- : (0.004865s) INSERT INTO "clients" ("ext_id", "ts_rest", "ts_version", "ext_project_id", "client_id", "project_id", "name") VALUES (33, '{"name":"test1","nickname":"test2","balance":1221,"email":"mail@example.com"}'::jsonb, 123.34534, 333, 22, 22, 'native_name') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "ts_rest" = "excluded"."ts_rest", "ts_version" = "excluded"."ts_version" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2019-06-10T12:27:55.918206 #36159]  INFO -- : (0.001304s) COMMIT
I, [2019-06-10T12:27:55.919296 #36159]  INFO -- : (0.000157s) BEGIN
I, [2019-06-10T12:27:55.921943 #36159]  INFO -- : (0.000942s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2019-06-10T12:27:55.922379 #36159]  INFO -- : (0.000253s) COMMIT
I, [2019-06-10T12:27:55.922761 #36159]  INFO -- : (0.000230s) SELECT count(*) AS "count" FROM "clients" LIMIT 1
I, [2019-06-10T12:27:55.923208 #36159]  INFO -- : (0.000200s) SELECT * FROM "clients" LIMIT 1
I, [2019-06-10T12:27:55.924781 #36159]  INFO -- : (0.000201s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2019-06-10T12:27:55.925236 #36159]  INFO -- : (0.000225s) SELECT * FROM "players" LIMIT 1
I, [2019-06-10T12:27:55.927856 #36159]  INFO -- : (0.001558s) SELECT pg_attribute.attname AS pk FROM pg_class, pg_attribute, pg_index, pg_namespace WHERE pg_class.oid = pg_attribute.attrelid AND pg_class.relnamespace = pg_namespace.oid AND pg_class.oid = pg_index.indrelid AND pg_index.indkey[0] = pg_attribute.attnum AND pg_index.indisprimary = 't' AND pg_class.oid = CAST(CAST('"clients"' AS regclass) AS oid)
I, [2019-06-10T12:27:55.929488 #36159]  INFO -- : (0.000772s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id") VALUES (34, 22, 'test', 35, 36) RETURNING "client_id"
I, [2019-06-10T12:27:55.930806 #36159]  INFO -- : (0.000253s) BEGIN
I, [2019-06-10T12:27:55.931616 #36159]  INFO -- : (0.000278s) DELETE FROM "clients" WHERE (("ext_id" = 33) AND ("ext_project_id" = 333)) RETURNING *
I, [2019-06-10T12:27:55.932114 #36159]  INFO -- : (0.000330s) COMMIT
I, [2019-06-10T12:27:55.932370 #36159]  INFO -- : (0.000074s) BEGIN
I, [2019-06-10T12:27:55.932722 #36159]  INFO -- : (0.000186s) DELETE FROM "players" WHERE ("external_id" = 33) RETURNING *
I, [2019-06-10T12:27:55.933041 #36159]  INFO -- : (0.000202s) COMMIT
I, [2019-06-10T12:27:55.933309 #36159]  INFO -- : (0.000166s) SELECT count(*) AS "count" FROM "clients" LIMIT 1
I, [2019-06-10T12:27:55.933899 #36159]  INFO -- : (0.000395s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2019-06-10T12:27:55.935690 #36159]  INFO -- : (0.000478s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-06-10T12:27:55.953501 #36159]  INFO -- : (0.017672s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-06-10T12:27:55.954753 #36159]  INFO -- : (0.000163s) BEGIN
I, [2019-06-10T12:27:55.956345 #36159]  INFO -- : (0.000665s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID'), ('mail2@example.com', 34, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2019-06-10T12:27:55.956737 #36159]  INFO -- : (0.000197s) COMMIT
I, [2019-06-10T12:27:55.957318 #36159]  INFO -- : (0.000280s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2019-06-10T12:27:55.958463 #36159]  INFO -- : (0.000612s) SELECT * FROM "players" LIMIT 1
I, [2019-06-10T12:27:55.959352 #36159]  INFO -- : (0.000244s) SELECT * FROM "players"
I, [2019-06-10T12:27:55.961657 #36159]  INFO -- : (0.001206s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-06-10T12:27:55.989399 #36159]  INFO -- : (0.027061s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-06-10T12:27:55.991329 #36159]  INFO -- : (0.000436s) BEGIN
I, [2019-06-10T12:27:55.993808 #36159]  INFO -- : (0.000836s) INSERT INTO "players" ("email", "rest", "external_id", "version", "project_id") VALUES ('mail@example.com', '{"first":"1","name":"test1","nickname":"test2","balance":1221}'::jsonb, 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "rest" = "excluded"."rest", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2019-06-10T12:27:55.995157 #36159]  INFO -- : (0.000726s) COMMIT
I, [2019-06-10T12:27:55.995605 #36159]  INFO -- : (0.000255s) SELECT * FROM "players" LIMIT 1
I, [2019-06-10T12:27:56.002414 #36159]  INFO -- : (0.000670s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-06-10T12:27:56.025927 #36159]  INFO -- : (0.023321s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-06-10T12:27:56.028304 #36159]  INFO -- : (0.000421s) BEGIN
I, [2019-06-10T12:27:56.037663 #36159]  INFO -- : (0.008813s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id") VALUES (33, 777, 'test1', 666, 9) RETURNING "client_id"
I, [2019-06-10T12:27:56.043290 #36159]  INFO -- : (0.004120s) INSERT INTO "players" ("email", "rest", "external_id", "version", "project_id") VALUES ('mail@example.com', '{"first":"1","name":"test1","nickname":"hi_i_got_hacked","balance":1221}'::jsonb, 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "rest" = "excluded"."rest", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2019-06-10T12:27:56.044231 #36159]  INFO -- : (0.000672s) COMMIT
I, [2019-06-10T12:27:56.045389 #36159]  INFO -- : (0.000758s) SELECT count(*) AS "count" FROM "clients" LIMIT 1
I, [2019-06-10T12:27:56.045904 #36159]  INFO -- : (0.000225s) SELECT * FROM "clients" LIMIT 1
I, [2019-06-10T12:27:56.052782 #36159]  INFO -- : (0.001652s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-06-10T12:27:56.072910 #36159]  INFO -- : (0.019941s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-06-10T12:27:56.075346 #36159]  INFO -- : (0.000477s) BEGIN
I, [2019-06-10T12:27:56.076644 #36159]  INFO -- : (0.000729s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id") VALUES (33, 777, 'test1', 666, 9) RETURNING "client_id"
I, [2019-06-10T12:27:56.079468 #36159]  INFO -- : (0.001499s) INSERT INTO "players" ("email", "rest", "external_id", "version", "project_id") VALUES ('mail@example.com', '{"first":"1","name":"test1","nickname":"hi_i_got_hacked","balance":1221}'::jsonb, 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "rest" = "excluded"."rest", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2019-06-10T12:27:56.080091 #36159]  INFO -- : (0.000302s) COMMIT
I, [2019-06-10T12:27:56.081185 #36159]  INFO -- : (0.000634s) SELECT * FROM "players" LIMIT 1
I, [2019-06-10T12:27:56.084509 #36159]  INFO -- : (0.001384s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-06-10T12:27:56.104758 #36159]  INFO -- : (0.020064s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-06-10T12:27:56.107198 #36159]  INFO -- : (0.000466s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2019-06-10T12:27:56.108922 #36159]  INFO -- : (0.000779s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-06-10T12:27:56.130236 #36159]  INFO -- : (0.021133s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-06-10T12:27:56.133421 #36159]  INFO -- : (0.000407s) BEGIN
I, [2019-06-10T12:27:56.135732 #36159]  INFO -- : (0.000601s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2019-06-10T12:27:56.136132 #36159]  INFO -- : (0.000235s) COMMIT
I, [2019-06-10T12:27:56.136650 #36159]  INFO -- : (0.000204s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2019-06-10T12:27:56.137942 #36159]  INFO -- : (0.000508s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-06-10T12:27:56.151531 #36159]  INFO -- : (0.013443s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-06-10T12:27:56.152604 #36159]  INFO -- : (0.000124s) BEGIN
I, [2019-06-10T12:27:56.154003 #36159]  INFO -- : (0.000558s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 32, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2019-06-10T12:27:56.154360 #36159]  INFO -- : (0.000205s) COMMIT
I, [2019-06-10T12:27:56.154755 #36159]  INFO -- : (0.000202s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2019-06-10T12:27:56.156438 #36159]  INFO -- : (0.000543s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-06-10T12:27:56.182321 #36159]  INFO -- : (0.025724s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-06-10T12:27:56.184144 #36159]  INFO -- : (0.000164s) BEGIN
I, [2019-06-10T12:27:56.185555 #36159]  INFO -- : (0.000634s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 32, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2019-06-10T12:27:56.186035 #36159]  INFO -- : (0.000324s) COMMIT
I, [2019-06-10T12:27:56.186392 #36159]  INFO -- : (0.000206s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2019-06-10T12:27:56.186787 #36159]  INFO -- : (0.000072s) BEGIN
I, [2019-06-10T12:27:56.187202 #36159]  INFO -- : (0.000231s) DELETE FROM "players" WHERE ("external_id" = 32) RETURNING *
I, [2019-06-10T12:27:56.187607 #36159]  INFO -- : (0.000303s) COMMIT
I, [2019-06-10T12:27:56.187888 #36159]  INFO -- : (0.000169s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2019-06-10T12:27:56.192266 #36159]  INFO -- : (0.001769s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-06-10T12:27:56.214576 #36159]  INFO -- : (0.021976s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-06-10T12:27:56.217214 #36159]  INFO -- : (0.000481s) CREATE TABLE IF NOT EXISTS "players_part_3"(like "players_part_1" INCLUDING ALL);
I, [2019-06-10T12:27:56.223672 #36159]  INFO -- : (0.001577s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('players_part_1' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2019-06-10T12:27:56.233447 #36159]  INFO -- : (0.002243s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('players_part_3' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2019-06-10T12:27:56.234937 #36159]  INFO -- : (0.000093s) BEGIN
I, [2019-06-10T12:27:56.238084 #36159]  INFO -- : (0.002381s) INSERT INTO players_part_1 ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID'), ('mail3@example.com', 35, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce(players_part_1."version", 0) < "excluded"."version") RETURNING *
I, [2019-06-10T12:27:56.239805 #36159]  INFO -- : (0.000885s) INSERT INTO players_part_3 ("email", "external_id", "version", "project_id") VALUES ('mail2@example.com', 34, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce(players_part_3."version", 0) < "excluded"."version") RETURNING *
I, [2019-06-10T12:27:56.241252 #36159]  INFO -- : (0.001218s) COMMIT
I, [2019-06-10T12:27:56.242272 #36159]  INFO -- : (0.000421s) SELECT count(*) AS "count" FROM "players_part_1" LIMIT 1
I, [2019-06-10T12:27:56.242667 #36159]  INFO -- : (0.000168s) SELECT * FROM "players_part_1" LIMIT 1
I, [2019-06-10T12:27:56.243153 #36159]  INFO -- : (0.000233s) SELECT * FROM "players_part_1"
I, [2019-06-10T12:27:56.243794 #36159]  INFO -- : (0.000291s) SELECT count(*) AS "count" FROM "players_part_3" LIMIT 1
I, [2019-06-10T12:27:56.244210 #36159]  INFO -- : (0.000241s) SELECT * FROM "players_part_3" LIMIT 1
I, [2019-06-10T12:27:56.247533 #36159]  INFO -- : (0.001735s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-06-10T12:27:56.263765 #36159]  INFO -- : (0.016062s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-06-10T12:27:56.264888 #36159]  INFO -- : (0.000175s) CREATE TABLE IF NOT EXISTS "players_part_3"(like "players_part_1" INCLUDING ALL);
I, [2019-06-10T12:27:56.265474 #36159]  INFO -- : (0.000070s) BEGIN
I, [2019-06-10T12:27:56.266710 #36159]  INFO -- : (0.000534s) INSERT INTO players_part_1 ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce(players_part_1."version", 0) < "excluded"."version") RETURNING *
I, [2019-06-10T12:27:56.267192 #36159]  INFO -- : (0.000339s) COMMIT
I, [2019-06-10T12:27:56.267518 #36159]  INFO -- : (0.000189s) SELECT count(*) AS "count" FROM "players_part_1" LIMIT 1
I, [2019-06-10T12:27:56.267793 #36159]  INFO -- : (0.000130s) SELECT * FROM "players_part_1" LIMIT 1
I, [2019-06-10T12:27:56.268280 #36159]  INFO -- : (0.000287s) SELECT count(*) AS "count" FROM "players_part_3" LIMIT 1
I, [2019-06-10T12:27:56.271244 #36159]  INFO -- : (0.001872s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-06-10T12:27:56.300472 #36159]  INFO -- : (0.029020s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-06-10T12:27:56.304935 #36159]  INFO -- : (0.000935s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-06-10T12:27:56.321778 #36159]  INFO -- : (0.016635s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-06-10T12:27:56.324471 #36159]  INFO -- : (0.000641s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-06-10T12:27:56.347391 #36159]  INFO -- : (0.022741s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000679s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.018361s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000751s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.026850s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.001200s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.028477s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000701s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.018175s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000971s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.020637s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000730s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.025510s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:01:10.013677 #36159]  INFO -- : (0.007905s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:01:10.045985 #36159]  INFO -- : (0.031945s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000664s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.016065s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000497s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.017969s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.001540s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.021153s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.002420s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.030863s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000489s) BEGIN
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.002144s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test2', 111, 111, 123)
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000798s) COMMIT
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.001633s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.024952s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000427s) BEGIN
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000681s) INSERT INTO "players" ("external_id", "project_id", "email", "online_status", "version", "rest") VALUES (111, 'pid1', '435', true, 12.343, NULL), (222, 'pid2', 'fghgf', false, 122.565, NULL)
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000615s) COMMIT
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000819s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.016129s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000671s) SELECT pg_attribute.attname AS pk FROM pg_class, pg_attribute, pg_index, pg_namespace WHERE pg_class.oid = pg_attribute.attrelid AND pg_class.relnamespace = pg_namespace.oid AND pg_class.oid = pg_index.indrelid AND pg_index.indkey[0] = pg_attribute.attnum AND pg_index.indisprimary = 't' AND pg_class.oid = CAST(CAST('"items"' AS regclass) AS oid)
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000885s) INSERT INTO "items" ("id", "name", "price") VALUES (1, 'test', 123) RETURNING "id"
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000372s) SELECT count(*) AS "count" FROM "items" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000579s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.011945s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000687s) INSERT INTO "items" ("id", "name", "price") VALUES (1, 'test', 123) RETURNING "id"
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000270s) SELECT count(*) AS "count" FROM "items" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000447s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.013750s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000584s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.011752s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.001138s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.013045s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000175s) BEGIN
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000839s) INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000528s) COMMIT
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000653s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.012287s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000127s) BEGIN
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000916s) INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000356s) COMMIT
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000576s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.011843s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000138s) BEGIN
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000579s) INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000314s) COMMIT
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000757s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.011741s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000117s) BEGIN
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000593s) INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000312s) COMMIT
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000605s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.011599s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000119s) BEGIN
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000569s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2010-01-01T15:00:00.000000 #36159]  INFO -- : (0.000348s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000615s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.011096s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000184s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000910s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000449s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000635s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.010354s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000140s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000518s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000347s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000655s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.012300s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000125s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000600s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000316s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000449s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.013039s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000123s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000600s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000317s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000475s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.012373s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000471s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.012535s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000477s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.013515s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000618s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.013525s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000670s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.012988s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000651s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.012802s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000662s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.014713s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000889s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.013592s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.001285s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.013191s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000912s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.012140s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000772s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.011602s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000575s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.012496s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000949s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.011825s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.001029s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.012372s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000615s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.011601s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000761s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.012998s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000662s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.013054s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000124s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000513s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000309s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000112s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000163s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000342s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000532s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.013096s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000115s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000467s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000324s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000099s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000314s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 3)
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000300s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000843s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.012383s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000115s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000393s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000302s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000238s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000244s) DELETE FROM "items" WHERE "id" = 4
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000421s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000539s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.013313s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000116s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000449s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000308s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000078s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000276s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 5)
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000339s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000897s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.012392s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000270s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000691s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000366s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000080s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000219s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 6)
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000343s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000437s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.012629s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000129s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000515s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000384s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000102s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000230s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 7)
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000294s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000538s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.012363s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000142s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000468s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000413s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000106s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000188s) DELETE FROM "items" WHERE "id" = 8
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000310s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000556s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.012633s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000124s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000675s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000333s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000075s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000220s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 9)
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000298s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000589s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.012645s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000173s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000512s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000323s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000082s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000184s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000374s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000468s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.014406s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000131s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000449s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000314s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000124s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000186s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000339s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000543s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.014443s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000143s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000462s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000307s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000082s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000185s) DELETE FROM "items" WHERE "id" = 14
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000294s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000619s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.012830s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000114s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000500s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000306s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000089s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000262s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 15)
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000302s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000537s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.018553s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000969s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.011014s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000465s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.011967s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000581s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.013145s) TRUNCATE items, players, players_part_1, clients, users, players_part_3
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000654s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.012739s) TRUNCATE players_part_3, items, players, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000924s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.014271s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000602s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.014628s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000605s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.012985s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000626s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.012677s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000675s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.012111s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000921s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.011638s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000748s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.011744s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000495s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.011994s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000494s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.011695s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000630s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.011456s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000095s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000402s) INSERT INTO "players" ("external_id", "project_id", "email", "online_status", "version", "rest") VALUES (111, 'pid1', '435', true, 12.343, NULL), (222, 'pid2', 'fghgf', false, 122.565, NULL)
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000279s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000431s) DELETE FROM "players" WHERE (("external_id" = 222) AND ("project_id" = 'pid2')) RETURNING *
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000434s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.009809s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000107s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000675s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test2', 111, 111, 123)
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000518s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000730s) DELETE FROM "clients" WHERE (("client_id" = 111) AND ("project_id" = 111)) RETURNING *
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000416s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.009853s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000115s) BEGIN
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000455s) INSERT INTO "clients" ("name", "ext_id", "ext_project_id", "ts_version", "ts_rest", "client_id", "project_id") VALUES ('test', 1, 1, 1.0, '{"a":1}'::jsonb, 1, 1) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "ts_version" = "excluded"."ts_version", "ts_rest" = "excluded"."ts_rest" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000316s) COMMIT
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000535s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.011412s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000097s) BEGIN
E, [2018-01-01T15:00:00.000000 #36159] ERROR -- : PG::NotNullViolation: ERROR:  null value in column "client_id" violates not-null constraint
DETAIL:  Failing row contains (null, null, test, 1, 1, 1.0, {"a": 1}).: INSERT INTO "clients" ("name", "ext_id", "ext_project_id", "ts_version", "ts_rest") VALUES ('test', 1, 1, 1.0, '{"a":1}'::jsonb) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "ts_version" = "excluded"."ts_version", "ts_rest" = "excluded"."ts_rest" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000068s) ROLLBACK
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.000385s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36159]  INFO -- : (0.012262s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.001497s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"users"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000103s) BEGIN
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000669s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id", "first_sync_time") VALUES ('test3', 222, 333, 124.0, 'mail3', 1, '2019-01-01 03:00:00.000000+0300') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000452s) COMMIT
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000672s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.012158s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000114s) BEGIN
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000961s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000367s) COMMIT
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000118s) BEGIN
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000712s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id", "first_sync_time") VALUES ('test3', 222, 333, 124.0, 'mail3', 1, '2019-01-01 03:00:00.000000+0300') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000358s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000093s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000264s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id", "first_sync_time") VALUES ('test4', 222, 333, 125.0, 'mail3', 1, '2019-02-04 04:56:00.000000+0300') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000302s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000538s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.012949s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000150s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000762s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000321s) COMMIT
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000084s) BEGIN
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000645s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id", "first_sync_time") VALUES ('test3', 222, 333, 124.0, 'mail3', 1, '2019-01-01 03:00:00.000000+0300') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000317s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000092s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000431s) INSERT INTO "clients" ("name", "ext_id", "ext_project_id", "ts_version", "client_id", "project_id") VALUES ('test2', 222, 222, 124.0, 333, 333) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "ts_version" = "excluded"."ts_version" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000322s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000563s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.014860s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000118s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000585s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000313s) COMMIT
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000081s) BEGIN
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000426s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id", "first_sync_time") VALUES ('test3', 222, 333, 124.0, 'mail3', 1, '2019-01-01 03:00:00.000000+0300') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000296s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000080s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000252s) INSERT INTO "clients" ("name", "client_id", "project_id", "ts_version", "ext_id", "ext_project_id") VALUES ('test2', 222, 222, 124.0, 333, 333) ON CONFLICT ("client_id", "project_id") DO UPDATE SET "name" = "excluded"."name", "ts_version" = "excluded"."ts_version" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000303s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000543s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.013436s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000115s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000547s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000307s) COMMIT
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000098s) BEGIN
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000597s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id", "first_sync_time") VALUES ('test3', 222, 333, 124.0, 'mail3', 1, '2019-01-01 03:00:00.000000+0300') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000346s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000231s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000271s) INSERT INTO "clients" ("name", "ext_id", "ext_project_id", "ts_version", "client_id", "project_id") VALUES ('test2', 222, 222, 123.0, 333, 333) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "ts_version" = "excluded"."ts_version" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000459s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000588s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.011990s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000123s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000893s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000319s) COMMIT
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000112s) BEGIN
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000644s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id", "first_sync_time") VALUES ('test3', 222, 333, 124.0, 'mail3', 1, '2019-01-01 03:00:00.000000+0300') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-01-01T03:00:00.000000 #36159]  INFO -- : (0.000320s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000094s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000281s) INSERT INTO "clients" ("name", "ext_id", "ext_project_id", "ts_version", "client_id", "project_id") VALUES ('test2', 222, 222, 124.0, 333, 333), ('test3', 223, 222, 124.0, 334, 333) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "ts_version" = "excluded"."ts_version", "client_id" = "excluded"."client_id", "project_id" = "excluded"."project_id" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000293s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000534s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.013072s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000206s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000591s) INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000316s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000084s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000247s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id") VALUES ('test3', 222, 333, 1.0, 'mail3', 1) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000308s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000594s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.013587s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000120s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000529s) INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000304s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000079s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000254s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id") VALUES ('test3', 222, 333, 124.0, 'mail3', 1) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000317s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000530s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.013170s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000107s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000561s) INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000298s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000084s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000388s) INSERT INTO "users" ("name", "id", "version", "email", "ext_id", "ext_project_id") VALUES ('test3', 222, 124.0, 'mail3', 1, 1) ON CONFLICT ("id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000301s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000672s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.014354s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000115s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000439s) INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000304s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000065s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000259s) INSERT INTO "users" ("id", "name", "ext_id", "ext_project_id", "version", "email") VALUES (1, 'test2', 222, 222, 124.0, 'mail3'), (2, 'test3', 223, 222, 124.0, 'mail3') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "id" = "excluded"."id", "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000270s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000461s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.010914s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000156s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000552s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version", "ts_rest") VALUES (1, 1, 'test', 1, 1, 1.0, '{"a":1}'::jsonb), (2, 1, 'test2', 2, 1, 1.0, '{"a":2}'::jsonb) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "client_id" = "excluded"."client_id", "project_id" = "excluded"."project_id", "name" = "excluded"."name", "ts_version" = "excluded"."ts_version", "ts_rest" = "excluded"."ts_rest" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000411s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000456s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.012084s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000613s) INSERT INTO "items" ("id", "name", "price") VALUES (1, 'test', 123) RETURNING "id"
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000056s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000150s) DELETE FROM "items" WHERE ("id" = 1) RETURNING *
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000056s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000120s) SELECT count(*) AS "count" FROM "items" LIMIT 1
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000346s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.012499s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000636s) INSERT INTO "items" ("id", "name", "price") VALUES (1, 'test', 123) RETURNING "id"
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000096s) BEGIN
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000227s) DELETE FROM "items" WHERE ("id" = 1) RETURNING *
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000428s) COMMIT
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000215s) SELECT count(*) AS "count" FROM "items" LIMIT 1
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000491s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.012353s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000439s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.011238s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000472s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.008056s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000424s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.009341s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000481s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.009465s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000633s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.011123s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000444s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.010859s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000471s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.011004s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000475s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.010157s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000603s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.009437s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000459s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.011574s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000494s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.010960s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000499s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.011783s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000614s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.011517s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000749s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.014031s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000942s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.011885s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000581s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.013043s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000657s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.013037s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000670s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.012819s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000612s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.012685s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000607s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.012421s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000704s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.011403s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000724s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.014492s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000919s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.010514s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000451s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.010450s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.000480s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36159]  INFO -- : (0.009973s) TRUNCATE players_part_3, players, players_part_1, clients, users, items
I, [2019-06-10T12:28:16.385702 #36321]  INFO -- : (0.018381s) DROP TABLE IF EXISTS "items";
CREATE TABLE "items" (
  "id" bigserial primary key,
  "name" varchar(255) NOT NULL,
  "price" double precision NOT NULL
);

DROP TABLE IF EXISTS "players";
CREATE TABLE "players" (
  "external_id" int primary key,
  "project_id" text,
  "email" varchar(255) NOT NULL,
  "online_status" boolean,
  "version" decimal,
  "rest" jsonb
);

DROP TABLE IF EXISTS "players_part_1";
CREATE TABLE "players_part_1" (like "players" INCLUDING ALL);

DROP TABLE IF EXISTS "clients";
CREATE TABLE "clients" (
  "client_id" int,
  "project_id" int,
  "name" varchar(255) NOT NULL,
  "ext_id" int NOT NULL,
  "ext_project_id" int NOT NULL,
  "ts_version" decimal,
  "ts_rest" jsonb,
  PRIMARY KEY (client_id, project_id),
  UNIQUE (ext_id, ext_project_id)
);

DROP TABLE IF EXISTS "users";
CREATE TABLE "users" (
  "id" int primary key,
  "name" varchar(255) NOT NULL,
  "email" varchar(255) NOT NULL,
  "ext_id" int NOT NULL,
  "ext_project_id" int NOT NULL,
  "version" decimal,
  "rest" jsonb,
  "first_sync_time" timestamp without time zone,
  UNIQUE (ext_id, ext_project_id)
);

I, [2019-06-10T12:28:16.490071 #36321]  INFO -- : (0.002174s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"items"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2019-06-10T12:28:16.500579 #36321]  INFO -- : (0.000946s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-06-10T12:28:16.514791 #36321]  INFO -- : (0.014063s) TRUNCATE players_part_3, items, players, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.001158s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.013751s) TRUNCATE players_part_3, items, players, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.001116s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.016087s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000609s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.014555s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000624s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.015238s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000622s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.019291s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000751s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.016510s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.001492s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.015733s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000637s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.012977s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.001362s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.014488s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000684s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.016191s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000689s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.014494s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000704s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.017192s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000638s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.015202s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000634s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.014510s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000734s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.015274s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000729s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.026550s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000606s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.018248s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000703s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.021221s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.001424s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.014416s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000725s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.018813s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000669s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.021088s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.001520s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.020027s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000681s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.015883s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.006995s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.025930s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000701s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.018250s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.001218s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.021383s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000610s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.016520s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000538s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.023100s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.001310s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.016521s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000718s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.016669s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.001201s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.017721s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.001238s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.015988s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.001818s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.014121s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000589s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.017044s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000747s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.019307s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000542s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.015651s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000535s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.015626s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000533s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.019077s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000997s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.019153s) TRUNCATE players_part_3, players, items, players_part_1, clients, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000600s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.017000s) TRUNCATE players, items, players_part_1, clients, players_part_3, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.003214s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.032100s) TRUNCATE players, items, players_part_1, clients, players_part_3, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.001301s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.022247s) TRUNCATE clients, players, items, players_part_1, players_part_3, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000522s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.017408s) TRUNCATE clients, players, items, players_part_1, players_part_3, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000616s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.017191s) TRUNCATE clients, players, items, players_part_1, players_part_3, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000771s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.017927s) TRUNCATE clients, players, items, players_part_1, players_part_3, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.002258s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.029795s) TRUNCATE clients, players, items, players_part_1, players_part_3, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.001601s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.018338s) TRUNCATE clients, players, items, players_part_1, players_part_3, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000649s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.019393s) TRUNCATE clients, players, items, players_part_1, players_part_3, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000685s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.019971s) TRUNCATE clients, players, items, players_part_1, players_part_3, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.001716s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"clients"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.001702s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"players"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000757s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.026098s) TRUNCATE clients, players, items, players_part_1, players_part_3, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000695s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.022746s) TRUNCATE clients, players, items, players_part_1, players_part_3, users
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000716s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.017536s) TRUNCATE items, players_part_1, players_part_3, users, clients, players
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.001440s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.018868s) TRUNCATE items, players_part_1, players_part_3, users, players, clients
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000664s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.021055s) TRUNCATE items, players_part_1, players_part_3, users, players, clients
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000145s) BEGIN
E, [2018-01-01T15:00:00.000000 #36321] ERROR -- : PG::NotNullViolation: ERROR:  null value in column "client_id" violates not-null constraint
DETAIL:  Failing row contains (null, null, test, 1, 1, 1.0, {"a": 1}).: INSERT INTO "clients" ("name", "ext_id", "ext_project_id", "ts_version", "ts_rest") VALUES ('test', 1, 1, 1.0, '{"a":1}'::jsonb) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "ts_version" = "excluded"."ts_version", "ts_rest" = "excluded"."ts_rest" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000082s) ROLLBACK
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.002475s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.029265s) TRUNCATE items, players_part_1, players_part_3, users, players, clients
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000149s) BEGIN
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000719s) INSERT INTO "clients" ("name", "ext_id", "ext_project_id", "ts_version", "ts_rest", "client_id", "project_id") VALUES ('test', 1, 1, 1.0, '{"a":1}'::jsonb, 1, 1) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "ts_version" = "excluded"."ts_version", "ts_rest" = "excluded"."ts_rest" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000601s) COMMIT
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.000801s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2018-01-01T15:00:00.000000 #36321]  INFO -- : (0.019633s) TRUNCATE items, players_part_1, players_part_3, players, users, clients
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.002554s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"users"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000107s) BEGIN
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000794s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id", "first_sync_time") VALUES ('test3', 222, 333, 124.0, 'mail3', 1, '2019-01-01 03:00:00.000000+0300') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000355s) COMMIT
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000686s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.028887s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.002767s) BEGIN
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.001318s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version", "ts_rest") VALUES (1, 1, 'test', 1, 1, 1.0, '{"a":1}'::jsonb), (2, 1, 'test2', 2, 1, 1.0, '{"a":2}'::jsonb) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "client_id" = "excluded"."client_id", "project_id" = "excluded"."project_id", "name" = "excluded"."name", "ts_version" = "excluded"."ts_version", "ts_rest" = "excluded"."ts_rest" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000558s) COMMIT
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.006625s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.034229s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000123s) BEGIN
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000523s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000306s) COMMIT
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000260s) BEGIN
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.001607s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id", "first_sync_time") VALUES ('test3', 222, 333, 124.0, 'mail3', 1, '2019-01-01 03:00:00.000000+0300') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000381s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000122s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000298s) INSERT INTO "clients" ("name", "client_id", "project_id", "ts_version", "ext_id", "ext_project_id") VALUES ('test2', 222, 222, 124.0, 333, 333) ON CONFLICT ("client_id", "project_id") DO UPDATE SET "name" = "excluded"."name", "ts_version" = "excluded"."ts_version" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000361s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.002683s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.018162s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000153s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000668s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000355s) COMMIT
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000115s) BEGIN
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.001185s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id", "first_sync_time") VALUES ('test3', 222, 333, 124.0, 'mail3', 1, '2019-01-01 03:00:00.000000+0300') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000439s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000118s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000314s) INSERT INTO "clients" ("name", "ext_id", "ext_project_id", "ts_version", "client_id", "project_id") VALUES ('test2', 222, 222, 124.0, 333, 333) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "ts_version" = "excluded"."ts_version" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000837s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000847s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.022421s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000154s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000775s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000524s) COMMIT
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000145s) BEGIN
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000850s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id", "first_sync_time") VALUES ('test3', 222, 333, 124.0, 'mail3', 1, '2019-01-01 03:00:00.000000+0300') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.001183s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000127s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000332s) INSERT INTO "clients" ("name", "ext_id", "ext_project_id", "ts_version", "client_id", "project_id") VALUES ('test2', 222, 222, 123.0, 333, 333) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "ts_version" = "excluded"."ts_version" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000346s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.001120s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.022016s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000382s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.001050s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000368s) COMMIT
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000105s) BEGIN
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000594s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id", "first_sync_time") VALUES ('test3', 222, 333, 124.0, 'mail3', 1, '2019-01-01 03:00:00.000000+0300') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000301s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000098s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000328s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id", "first_sync_time") VALUES ('test4', 222, 333, 125.0, 'mail3', 1, '2019-02-04 04:56:00.000000+0300') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000360s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000640s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.028703s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000143s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000958s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000414s) COMMIT
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000190s) BEGIN
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.001631s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id", "first_sync_time") VALUES ('test3', 222, 333, 124.0, 'mail3', 1, '2019-01-01 03:00:00.000000+0300') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000587s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000127s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000334s) INSERT INTO "clients" ("name", "ext_id", "ext_project_id", "ts_version", "client_id", "project_id") VALUES ('test2', 222, 222, 124.0, 333, 333), ('test3', 223, 222, 124.0, 334, 333) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "ts_version" = "excluded"."ts_version", "client_id" = "excluded"."client_id", "project_id" = "excluded"."project_id" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000324s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.001016s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.018092s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000183s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.001130s) INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000362s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000119s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000326s) INSERT INTO "users" ("name", "id", "version", "email", "ext_id", "ext_project_id") VALUES ('test3', 222, 124.0, 'mail3', 1, 1) ON CONFLICT ("id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000336s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.001210s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.022542s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000135s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000485s) INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000322s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000073s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000405s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id") VALUES ('test3', 222, 333, 124.0, 'mail3', 1) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000628s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000501s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.022358s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000463s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.001201s) INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000343s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000107s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000290s) INSERT INTO "users" ("name", "ext_id", "ext_project_id", "version", "email", "id") VALUES ('test3', 222, 333, 1.0, 'mail3', 1) ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000318s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000631s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.013554s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000156s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000885s) INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000375s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000113s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000313s) INSERT INTO "users" ("id", "name", "ext_id", "ext_project_id", "version", "email") VALUES (1, 'test2', 222, 222, 124.0, 'mail3'), (2, 'test3', 223, 222, 124.0, 'mail3') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "id" = "excluded"."id", "name" = "excluded"."name", "version" = "excluded"."version" WHERE (coalesce("users"."version", 0) < "excluded"."version") RETURNING *
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000350s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000852s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.014093s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000141s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000624s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test2', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000313s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000649s) DELETE FROM "clients" WHERE (("client_id" = 111) AND ("project_id" = 111)) RETURNING *
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000604s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.012975s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000131s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000457s) INSERT INTO "players" ("external_id", "project_id", "email", "online_status", "version", "rest") VALUES (111, 'pid1', '435', true, 12.343, NULL), (222, 'pid2', 'fghgf', false, 122.565, NULL)
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000343s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000621s) DELETE FROM "players" WHERE (("external_id" = 222) AND ("project_id" = 'pid2')) RETURNING *
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000705s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.013026s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000579s) SELECT pg_attribute.attname AS pk FROM pg_class, pg_attribute, pg_index, pg_namespace WHERE pg_class.oid = pg_attribute.attrelid AND pg_class.relnamespace = pg_namespace.oid AND pg_class.oid = pg_index.indrelid AND pg_index.indkey[0] = pg_attribute.attnum AND pg_index.indisprimary = 't' AND pg_class.oid = CAST(CAST('"items"' AS regclass) AS oid)
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000698s) INSERT INTO "items" ("id", "name", "price") VALUES (1, 'test', 123) RETURNING "id"
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000161s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000472s) DELETE FROM "items" WHERE ("id" = 1) RETURNING *
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000115s) ROLLBACK
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000348s) SELECT count(*) AS "count" FROM "items" LIMIT 1
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000544s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.011896s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000705s) INSERT INTO "items" ("id", "name", "price") VALUES (1, 'test', 123) RETURNING "id"
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000087s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000231s) DELETE FROM "items" WHERE ("id" = 1) RETURNING *
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000332s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000187s) SELECT count(*) AS "count" FROM "items" LIMIT 1
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000710s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.011873s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000500s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.011256s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000430s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.010104s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000506s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.011757s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000598s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.014073s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000626s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.012007s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000748s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.012158s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000095s) BEGIN
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000427s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-01-01T03:00:00.000000 #36321]  INFO -- : (0.000348s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000448s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.010668s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000139s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000592s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000344s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000501s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.015005s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000114s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000539s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000323s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000651s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.012158s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000117s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000556s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000288s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000468s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.014919s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000122s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000547s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test1', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000337s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000708s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.011205s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000123s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000583s) INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000320s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000541s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.013305s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000133s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000482s) INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000350s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000541s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.011809s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000119s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000438s) INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000402s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000598s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.011936s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000143s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000536s) INSERT INTO "users" ("id", "name", "email", "ext_id", "ext_project_id", "version", "rest") VALUES (111, 'test1', 'mail1', 111, 333, 123, NULL), (222, 'test2', 'mail2', 222, 333, 12.546, NULL)
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000309s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000598s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.012466s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000116s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000600s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id", "ts_version") VALUES (111, 111, 'test1', 222, 222, 123), (222, 222, 'test2', 111, 111, 123)
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000361s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000410s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.012877s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000121s) BEGIN
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000515s) INSERT INTO "players" ("external_id", "project_id", "email", "online_status", "version", "rest") VALUES (111, 'pid1', '435', true, 12.343, NULL), (222, 'pid2', 'fghgf', false, 122.565, NULL)
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000313s) COMMIT
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000435s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.012255s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000807s) INSERT INTO "items" ("id", "name", "price") VALUES (1, 'test', 123) RETURNING "id"
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000216s) SELECT count(*) AS "count" FROM "items" LIMIT 1
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000474s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.013074s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000627s) INSERT INTO "items" ("id", "name", "price") VALUES (1, 'test', 123) RETURNING "id"
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000245s) SELECT count(*) AS "count" FROM "items" LIMIT 1
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.000592s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2019-02-04T04:56:00.000000 #36321]  INFO -- : (0.012106s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000930s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.013454s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:01:10.001963 #36321]  INFO -- : (0.000553s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:01:10.013573 #36321]  INFO -- : (0.011447s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000518s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.011209s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000484s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.011207s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000561s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.010991s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000508s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.012010s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000542s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.011631s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000471s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.012129s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000551s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.011979s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000550s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.034214s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000602s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.011033s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000128s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000751s) INSERT INTO "clients" ("ext_id", "ts_rest", "ts_version", "ext_project_id", "client_id", "project_id", "name") VALUES (33, '{"name":"test1","nickname":"test2","balance":1221,"email":"mail@example.com"}'::jsonb, 123.34534, 333, 22, 22, 'native_name') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "ts_rest" = "excluded"."ts_rest", "ts_version" = "excluded"."ts_version" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000515s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000278s) SELECT count(*) AS "count" FROM "clients" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000179s) DELETE FROM "clients" WHERE (("ext_id" = 33) AND ("ext_project_id" = 333)) RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000208s) DELETE FROM "players" WHERE ("external_id" = 33) RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000179s) SELECT count(*) AS "count" FROM "clients" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000340s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000526s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.012527s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000135s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000544s) INSERT INTO "clients" ("ext_id", "ts_rest", "ts_version", "ext_project_id", "client_id", "project_id", "name") VALUES (33, '{"name":"test1","nickname":"test2","balance":1221,"email":"mail@example.com"}'::jsonb, 123.34534, 333, 22, 22, 'native_name') ON CONFLICT ("ext_id", "ext_project_id") DO UPDATE SET "ts_rest" = "excluded"."ts_rest", "ts_version" = "excluded"."ts_version" WHERE (coalesce("clients"."ts_version", 0) < "excluded"."ts_version") RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000431s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000067s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000405s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000288s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000153s) SELECT count(*) AS "count" FROM "clients" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000116s) SELECT * FROM "clients" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000134s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000109s) SELECT * FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000390s) SELECT pg_attribute.attname AS pk FROM pg_class, pg_attribute, pg_index, pg_namespace WHERE pg_class.oid = pg_attribute.attrelid AND pg_class.relnamespace = pg_namespace.oid AND pg_class.oid = pg_index.indrelid AND pg_index.indkey[0] = pg_attribute.attnum AND pg_index.indisprimary = 't' AND pg_class.oid = CAST(CAST('"clients"' AS regclass) AS oid)
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000450s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id") VALUES (34, 22, 'test', 35, 36) RETURNING "client_id"
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000084s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000326s) DELETE FROM "clients" WHERE (("ext_id" = 33) AND ("ext_project_id" = 333)) RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000472s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000100s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000231s) DELETE FROM "players" WHERE ("external_id" = 33) RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000564s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000157s) SELECT count(*) AS "count" FROM "clients" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000140s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000368s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.011732s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000117s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000606s) INSERT INTO "players" ("email", "rest", "external_id", "version", "project_id") VALUES ('mail@example.com', '{"first":"1","name":"test1","nickname":"test2","balance":1221}'::jsonb, 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "rest" = "excluded"."rest", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000313s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000183s) SELECT * FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.001204s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.013167s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000154s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000579s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id") VALUES (33, 777, 'test1', 666, 9) RETURNING "client_id"
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000894s) INSERT INTO "players" ("email", "rest", "external_id", "version", "project_id") VALUES ('mail@example.com', '{"first":"1","name":"test1","nickname":"hi_i_got_hacked","balance":1221}'::jsonb, 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "rest" = "excluded"."rest", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000348s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000320s) SELECT count(*) AS "count" FROM "clients" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000256s) SELECT * FROM "clients" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000529s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.013859s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000160s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000400s) INSERT INTO "clients" ("client_id", "project_id", "name", "ext_id", "ext_project_id") VALUES (33, 777, 'test1', 666, 9) RETURNING "client_id"
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000581s) INSERT INTO "players" ("email", "rest", "external_id", "version", "project_id") VALUES ('mail@example.com', '{"first":"1","name":"test1","nickname":"hi_i_got_hacked","balance":1221}'::jsonb, 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "rest" = "excluded"."rest", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000304s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000181s) SELECT * FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000546s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.012287s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000128s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000558s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID'), ('mail2@example.com', 34, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000399s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000196s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000159s) SELECT * FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000139s) SELECT * FROM "players"
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000635s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.012033s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000229s) CREATE TABLE IF NOT EXISTS "players_part_3"(like "players_part_1" INCLUDING ALL);
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.001059s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('players_part_1' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000994s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('players_part_3' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000100s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000471s) INSERT INTO players_part_1 ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID'), ('mail3@example.com', 35, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce(players_part_1."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000338s) INSERT INTO players_part_3 ("email", "external_id", "version", "project_id") VALUES ('mail2@example.com', 34, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce(players_part_3."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000364s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000186s) SELECT count(*) AS "count" FROM "players_part_1" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000120s) SELECT * FROM "players_part_1" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000105s) SELECT * FROM "players_part_1"
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000140s) SELECT count(*) AS "count" FROM "players_part_3" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000143s) SELECT * FROM "players_part_3" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000360s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.012212s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000202s) CREATE TABLE IF NOT EXISTS "players_part_3"(like "players_part_1" INCLUDING ALL);
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000081s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000520s) INSERT INTO players_part_1 ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce(players_part_1."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000311s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000193s) SELECT count(*) AS "count" FROM "players_part_1" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000150s) SELECT * FROM "players_part_1" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000275s) SELECT count(*) AS "count" FROM "players_part_3" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000719s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.011998s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000347s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000544s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.011733s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000099s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000692s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 33, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000278s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000299s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000708s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.013889s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000139s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000536s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 32, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000355s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000196s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000697s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.011828s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000124s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000636s) INSERT INTO "players" ("email", "external_id", "version", "project_id") VALUES ('mail@example.com', 32, 123.34534, 'PID') ON CONFLICT ("external_id") DO UPDATE SET "email" = "excluded"."email", "version" = "excluded"."version", "project_id" = "excluded"."project_id" WHERE (coalesce("players"."version", 0) < "excluded"."version") RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000312s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000197s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000083s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000201s) DELETE FROM "players" WHERE ("external_id" = 32) RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000319s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000264s) SELECT count(*) AS "count" FROM "players" LIMIT 1
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000599s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.012051s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000092s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000345s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000312s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000095s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000202s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000536s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000548s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.011892s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000110s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000486s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000299s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000090s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000212s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 3)
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000303s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000530s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.011827s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000108s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000458s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000326s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000119s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000242s) DELETE FROM "items" WHERE "id" = 4
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000302s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000546s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.013268s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000093s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000355s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000369s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000060s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000187s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000325s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000629s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.012330s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000130s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000443s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000307s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000137s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000394s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 7)
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000325s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000533s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.013230s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000113s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000599s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000349s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000084s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000180s) DELETE FROM "items" WHERE "id" = 8
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000318s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000462s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.012867s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000117s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000503s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000305s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000076s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000185s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000314s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000521s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.011965s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000120s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000492s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000352s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000074s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000210s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 11)
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000336s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000554s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.012123s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000127s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000564s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000307s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000085s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000218s) DELETE FROM "items" WHERE "id" = 12
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000300s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000464s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.011063s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000095s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000515s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000332s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000177s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000242s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 13)
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000355s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000571s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.012044s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000112s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000494s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000439s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000071s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000227s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 14)
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000384s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000544s) SELECT "tablename" FROM "pg_tables" WHERE ("schemaname" = 'public')
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.012632s) TRUNCATE players, items, players_part_1, players_part_3, users, clients
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000265s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000495s) INSERT INTO "items" ("name", "price") VALUES ('An item', 10.0) RETURNING *
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000318s) COMMIT
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000071s) BEGIN
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000218s) UPDATE "items" SET "price" = 20.0 WHERE ("id" = 15)
I, [2010-01-01T15:00:00.000000 #36321]  INFO -- : (0.000304s) COMMIT
